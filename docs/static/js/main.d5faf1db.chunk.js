(this.webpackJsonpava=this.webpackJsonpava||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),i=a.n(o),c=(a(15),a(5)),l=a(1),s=a(2),d=a(3),u=a(4),m=a(9);a(16),a(17);var g=function(e){var t=e.user,a=e.stage?" "+e.stage:"";return r.a.createElement("div",{key:t.name,className:"avatar"+a,style:{"--user-color":t.color}},r.a.createElement("img",{src:"images/"+t.img}))};a(18);var f=function(e){var t=e.placement,a=e.active,n=e.users,o=e.edgeIndex,i=e.edgeStage;return r.a.createElement("div",{className:"fold "+t},n.map((function(e){return r.a.createElement(g,{key:e.name,user:e,stage:a&&o===e.index?i:null})})))},v=a(8),p=a.n(v),x=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).avatarsRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.observer;e&&e.observe(this.avatarsRef.current)}},{key:"render",value:function(){var e=this.props,t=e.field,a=e.index,n=e.isOffScreen;return r.a.createElement("div",{className:"row"},r.a.createElement("label",null,t.name),r.a.createElement("div",{className:p()({presence:!0,"off-screen":n}),"data-index":a,ref:this.avatarsRef},t.on.map((function(e){return r.a.createElement(g,{key:e.name,user:e})}))),"textarea"===t.type?r.a.createElement("textarea",null):r.a.createElement("input",{type:"text"}))}}]),a}(r.a.Component),h=-1,b=0,I=1,S="",y="popping",E="popped",w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).intersectListener=function(e,t){n.state.initIndex?e.forEach((function(e){var t=e.target.getAttribute("data-index");console.log("".concat(t," changed"),e);var a=parseInt(t);1===e.intersectionRatio?n.state.lastAboveIndex>=a?n.setState({lastAboveIndex:a-1}):n.state.lastBelowIndex<=a&&n.setState({lastBelowIndex:a+1}):e.intersectionRatio>=.8?n.setState({edgeIndex:a,edgeStage:E}):e.intersectionRatio>=.5?n.setState({edgeIndex:a,edgeStage:y}):e.boundingClientRect.y<0?n.setState({lastAboveIndex:a}):n.setState({lastBelowIndex:a})})):(e.forEach((function(e){var t=e.target.getAttribute("data-index");if(console.log("".concat(t," changed"),e),!e.isIntersecting){var a=parseInt(t);e.boundingClientRect.y<0?a>n.state.lastAboveIndex&&n.setState({lastAboveIndex:a}):a<n.state.lastBelowIndex&&n.setState({lastBelowIndex:a})}})),n.setState({initIndex:!0}))},n.onPageScroll=function(e){n.setState({lastScrollPos:e.target.scrollTop,scrollDirection:e.target.scrollTop>n.state.lastScrollPos?I:h})},n.state={lastAboveIndex:-1,lastBelowIndex:n.props.fields.length,initIndex:!1,edgeIndex:-1,edgeStage:S,lastScrollPos:0,scrollDirection:b},n.observer=new IntersectionObserver(n.intersectListener,{threshold:[.5,.8,1]}),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.fields,a=this.state,n=a.lastAboveIndex,o=a.lastBelowIndex,i=a.edgeIndex,c=a.edgeStage,l=a.scrollDirection;return r.a.createElement("div",{id:"page",onScroll:this.onPageScroll},-1!==n&&r.a.createElement(f,{placement:"above",active:l===h,edgeIndex:i,edgeStage:c,users:t.slice(0,n+1).map((function(e){return e.on})).reverse().flat()}),r.a.createElement("div",{className:"container"},t.map((function(t,a){return r.a.createElement(x,{key:a,field:t,index:a,observer:e.observer,isOffScreen:a<=n||a>=o})}))),o!==t.length&&r.a.createElement(f,{placement:"below",active:l===I,edgeIndex:i,edgeStage:c,users:t.slice(o).map((function(e){return e.on})).flat()}))}}]),a}(r.a.Component),O=[{name:"field 0",type:"input-text",on:[]},{name:"field 1",type:"input-text",on:[]},{name:"field 2",type:"textarea",on:[]},{name:"field 3",type:"input-text",on:[]},{name:"field 4",type:"textarea",on:[]},{name:"field 5",type:"input-text",on:[]},{name:"field 6",type:"input-text",on:[]},{name:"field 7",type:"textarea",on:[]}],j=[{name:"Buffy",color:"#4bc7eb",img:"avatar_01.png",index:-1},{name:"Willow",color:"#a3e5d9",img:"avatar_02.png",index:-1},{name:"Xander",color:"#6dccb8",img:"avatar_03.png",index:-1},{name:"Giles",color:"#49c8eb",img:"avatar_04.png",index:-1},{name:"Drusilla",color:"#ea5cbe",img:"avatar_05.png",index:-1},{name:"Angel",color:"#8bc7eb",img:"avatar_06.png",index:-1},{name:"Spike",color:"#7f6892",img:"avatar_07.png",index:-1},{name:"Tara",color:"#a674a5",img:"avatar_08.png",index:-1},{name:"Cordelia",color:"#ec6d4a",img:"avatar_09.png",index:-1},{name:"Faith",color:"#9994d4",img:"avatar_10.png",index:-1},{name:"Oz",color:"#fd8103",img:"avatar_11.png",index:-1}];function k(e){return Math.floor(Math.random()*e)}var _=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateState=function(){var e=k(5);console.log("updating ".concat(e," fields"));for(var t=Object(c.a)(n.state.remainingUsers),a=Object(c.a)(n.state.data),r=0;r<e;r++){var o=k(a.length);if(Math.random()>.5){if(0===t.length)continue;var i=t.shift();i.index=o,a[o].on.push(i)}else{if(0===a[o].on.length)continue;var l=a[o].on.shift();l.index=-1,t.push(l)}}n.setState({data:a,remainingUsers:t})},n.state=function(){var e=[].concat(j);return{data:O.map((function(t,a){var n=k(3),r=k(e.length-1-n),o=e.splice(r,n).map((function(e){return Object(m.a)({},e,{index:a})}));return t.on=o,t})),remainingUsers:e}}(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){setInterval(this.updateState,45e3)}},{key:"render",value:function(){return r.a.createElement(w,{fields:this.state.data})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.d5faf1db.chunk.js.map